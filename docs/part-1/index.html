<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Part 1. RxJS: Better async programming | RxJS Fundamentals</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://this-is-learning.github.io/rxjs-fundamentals-course/docs/part-1"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Part 1. RxJS: Better async programming | RxJS Fundamentals"><meta data-react-helmet="true" name="description" content="Contributors:"><meta data-react-helmet="true" property="og:description" content="Contributors:"><link data-react-helmet="true" rel="shortcut icon" href="/rxjs-fundamentals-course/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://this-is-learning.github.io/rxjs-fundamentals-course/docs/part-1"><link data-react-helmet="true" rel="alternate" href="https://this-is-learning.github.io/rxjs-fundamentals-course/docs/part-1" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://this-is-learning.github.io/rxjs-fundamentals-course/docs/part-1" hreflang="x-default"><link rel="stylesheet" href="/rxjs-fundamentals-course/assets/css/styles.a07871b4.css">
<link rel="preload" href="/rxjs-fundamentals-course/assets/js/runtime~main.0d80912e.js" as="script">
<link rel="preload" href="/rxjs-fundamentals-course/assets/js/main.8ae3d8c4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rxjs-fundamentals-course/"><img src="/rxjs-fundamentals-course/img/logo.png" alt="RxJS Fundamentals" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rxjs-fundamentals-course/img/logo.png" alt="RxJS Fundamentals" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">RxJS Fundamentals</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rxjs-fundamentals-course/docs/part-1">Course</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/this-is-learning/rxjs-fundamentals-course" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/rxjs-fundamentals-course/docs/part-1">Part 1. RxJS: Better async programming</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rxjs-fundamentals-course/docs/part-2">Part 2. Reactive programming and RxJS</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rxjs-fundamentals-course/docs/part-3">Part 3. The most common RxJS operators</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rxjs-fundamentals-course/docs/part-4">Part 4. How RxJS is used by Angular</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rxjs-fundamentals-course/docs/part-5">Part 5. Everything is a stream: Push-based architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rxjs-fundamentals-course/docs/part-6">Part 6. Creational operators</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RxJS: better async programming</h1></header><p>Contributors:</p><ul><li>Oleksandr Poshtaruk</li><li>Armen Vardanyan</li></ul><header><h1>Why do we need Observables?</h1></header><p>Async operations are the core of today&#x27;s web development. Almost any interesting interaction in a modern web app involves an async operation. Mouse click? Async. Loading data from the backend? Async. Waiting for something to happen before rendering some piece of UI? Also async. But there are not many powerful built-in tools for implementing working with them. Let&#x27;s recall some of the native ones:</p><ul><li>setTimeout/setInterval</li><li>Promises</li><li>generator (the *functions)</li></ul><p>And that&#x27;s it.</p><p>Yeah, you may wonder - what about async/await? Well, it turns out, those are just wrappers for Promises, essentially syntactic sugar.</p><p>What challenges usually arise with async programming?</p><p>Let&#x27;s review typical async programming issues a developer can encounter:</p><ul><li>Starting one async operation only after a previous async operation is finished - preventing race conditions.</li><li>Repeating failed async operation on error or on successful completion.</li><li>Combining the results of a few async operations results in different ways.</li><li>Recalculating displayed data on each periodical async data update</li><li>Canceling async operations if it is not needed anymore</li></ul><p>Now let&#x27;s find out whether tools listed above can solve these challenges seamlessly.</p><p><em>a) Starting one after another</em></p><p>Well, you can do that with <code>Promise.then.then.then</code>, but that is useful only for very straightforward logic. Also, if we want to perform some complex calculations on the result of one async operation before starting the next one, the callbacks for the &quot;then&quot; functions will become bloated and less readable very fast.</p><p>We can improve the situation using async/await - but what if we want to repeat failed network requests?</p><p>We cannot do that with async/await easily.</p><p><em>b) Combining the results of a few async operations in different ways</em>
We have Promise.race and Promise.all. Not long ago we got Promise.allSettled (check canIuse before using it)
But again - that&#x27;s it. No repeat on success or failure (if we want it).</p><p><em>c) Do displayed data recalculations on each periodical async data update</em>
Ok. SetTimeout is good here, but it does not provide any complicated failure logic (repeat on failure). It is possible to implement it - but with some code overhead.</p><p><em>d) Cancel async operations in case it is not needed anymore</em>
You can cancel setTimeout/setInterval - but you cannot cancel fetch (well, you can with AbortController, but check browser support first (IE11))</p><p>But again - <em> <strong>combination</strong> </em> of async requests result or <em> <strong>repeat/retry</strong> </em> on error logic implementation remains very challenging.</p><p>Do we have a solution?
YES!</p><p>Observables from RxJS library.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="what-is-rxjs"></a>What is RxJS<a class="hash-link" href="#what-is-rxjs" title="Direct link to heading">#</a></h2><p>RxJS is a library for reactive programming using <code>Observables</code> which make it easier to compose asynchronous or callback-based code. RxJS is the JavaScript implementation of Reactive programming (or the Reactive Extentions - Rx) paradigm.</p><p>Reactive programming helps handle ASYNC operations easily by treating those as streams of data.</p><p>Data streams are sequences of business logic events.</p><p>Examples of such events are:</p><ul><li>Browser events: mouse clicking/moving, input field change, etc.</li><li>REST API data fetching</li><li>Web-component state switching/DOM updates</li><li>Calculated data update</li><li>WebSocket real time data</li><li>The list goes on</li></ul><p>The main entity (which wraps our data) from that library is the <em> <strong>Observable</strong> </em>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="what-are-observables"></a>What are Observables?<a class="hash-link" href="#what-are-observables" title="Direct link to heading">#</a></h2><p>Short answer: <code>Observable</code> is an object that represents a stream of data, to which we can subscribe to receive events/error notifications, and which we can manipulate using special functions called operators.</p><p>Long answer: we need to dive a bit deeper.</p><p>To understand Observables better let&#x27;s use some metaphors:</p><p>a) Array of future values, which are spreaded over time - this may sound complicated, but if we break it down, it is really simple:</p><p>Let&#x27;s take a usual array - its values are there instantly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token number" style="color:rgb(255, 98, 140)">1</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">2</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">3</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">4</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">5</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// we can access all values at once - they are already there</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We can transform these values as well:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token number" style="color:rgb(255, 98, 140)">1</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">2</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">3</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">4</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">5</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">map</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(255, 157, 0)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">1</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// 2,3,4,5,6</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is very similar to <code>Observables</code> - the only difference being that for an <code>Observable</code> the values are in place now and some of the values will be received later.</p><p><code>Observable</code>: [1 &lt;--some time---&gt; 2 &lt;--timeâ†’...]</p><p>It is important to understand that most values will arrive and be handled later (at the moment of arrival).</p><p>[1 &lt;--sometime---&gt;2 &lt;--timeâ†’...].pipe(map(x =&gt; x+1)) // [2â€¦..3â€¦..etc]</p><p>b) Push-based value fetching - what does this mean? In general, we mostly use pull based value fetching in programming. A great example of pull based value fetching are functions: they are there, but we, the consumer of their value, determine when we will call the function to receive and handle the data. On the other hand, for example, a click MouseEvent listener is a push based system - we can never know when the event will be <em>pushed</em> to us - the producer determines when we receive values - but we will handle those values <em>as soon as</em> they arrive.</p><p>If we talk about arrays - we get any value when we want it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> someArray </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token number" style="color:rgb(255, 98, 140)">1</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">2</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">3</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">someArray</span><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>But in the case of <code>Observables</code> (where values are delivered in the future), the receiver (which is called subscriber or observer- more about it in the next chapter) cannot control when the producer will emit values.</p><p>This approach is called push-based.</p><p>So, in the end, an <code>Observable</code> is an object representing a stream of values spread over time, delivered via a push based system, which can be subscribed to in order to receive and handle those values, and transformed using special functions called operators.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="promises-and-observables"></a>Promises <strong>and</strong> Observables<a class="hash-link" href="#promises-and-observables" title="Direct link to heading">#</a></h2><p>Now let&#x27;s compare Promises and Observables.</p><p>They have some similarities that will help us understand Observables.</p><p>The main similarity between them is that both of them represent a result of an async operation and how it is being handled. Both <code>Promises</code> and <code>Observables</code> operate with data that isn&#x27;t available right now but will arrive in the future. So what&#x27;s the main difference then?</p><p>The thing is, <code>Promises</code> are only one particular case of async operation - a singular operation with a final and conclusive result. What does that mean? Let&#x27;s take a look at a standard HTTP request - how is it invoked and resolved? Well, we call a URL using one of the HTTP methods, and get a <code>Promise</code> that will invoke the callback to the &quot;then&quot; method when data arrives (this is called &quot;resolving a <code>Promise</code>&quot;), or, if there has been any kind of error during the request, call the callback provided to the &quot;catch&quot; method (this is called &quot;rejecting a <code>Promise</code>&quot;). Okay, so this is an operation that gets (or fails to) some data, handles it and just goes away. We cannot do anything with the <code>Promise</code> after it is resolved/rejected - we have to make another HTTP call, create a new <code>Promise</code> and handle it again in the same way.</p><p>Now, let&#x27;s take a look at some click events on a button. We start listening to the click events, but there is no guarantee that the callback will be invoked any time soon, right? Now, 5 minutes later the user finally clicks the button, and our callback works and handles the event, but it is not &quot;resolved&quot;. The user can continue clicking on the button as many times as they want, and we would still have to handle that click. And after the user finally goes to another page, we have to stop listening to the clicks, because there is no button any more. We cannot represent a stream of events like clicks with a Promise, because a Promise works once and is destroyed afterwards. But <code>Observable</code> Streams of RxJS give us the ability to create streams, listen to their events, handle error cases, and also, handle the situation when the stream completes - like when the user went to another page in our example. So, in this regard, we can treat <code>Observables</code> as a far more powerful version of Promises, which deals with multiple events rather than one instance.</p><p><img alt="Promise vs. RxJS" src="/rxjs-fundamentals-course/assets/images/promise-vs-rxjs-199ff69bc5e03c101dc6ebb751a9c6db.png"></p><p><em>Image by Andrew Grekov.</em></p><p>Now lets take a closer look.</p><p>You may ask - so what is the difference? And why do we need <code>Observables</code> at all if they actually do same things?</p><p>Let me first answer a second question:</p><p>The main power of RxJS is a variation of operators that can emulate any async steam behavior - for example combine streams, repeat streams on success or retry on error, etc - out of the box.</p><p>Why operators are so powerful? Because they can do many things:</p><ol><li><p>Modify stream data</p></li><li><p>Filter out data you don&#x27;t need (if duplicate data is emitted or based on a condition)</p></li><li><p>Repeat/retry data emissions on success or on failure (mostly used for HTTP requests wrapped in <code>Observables</code>)</p></li><li><p>Combination of steams is also possible not only as <code>Promise.all</code> (all resolved) or <code>Promise.race</code> (any resolved) but with many more cases:</p></li></ol><ul><li>Emission of more than one value</li><li>On each value from source1 take last emitted value from source2</li><li>On any emission from source1 or source2 emit array of last values from both</li><li>Etc</li></ul><p>For example:</p><p><strong>a) combineLatest</strong>(observable1, observable2,â€¦) â€” waits for any of observable to emit and provide array of last emitted values from all observables (result: [value_obs1, value_obs2,..]). Very good if you should update page on a new data from a few different sources.</p><p><strong>b)</strong> observable1.pipe( <strong>withLatestFrom</strong> (observable2) â€” on each value from observable1 also provide last emitted value for observable2 (result: [value_obs1, value_obs2]).</p><p><strong>c) forkJoin</strong>(observable1, observable2,â€¦)â€” analog for Promise.all â€” waits till all Observables are complete and then emits an array of last values from all of the argument observables.</p><p><strong>d)**</strong>zip** (observable1, observable2,â€¦)â€” waits for all of the argument observables to emit values with the same index and provide an array of emitted values with the same index (result: [value_obs1, value_obs2,..]).</p><p><strong>e) race</strong>(observable1, observable2,â€¦) â€” returns an Observable that mirrors the first source Observable to emit an item.</p><p><strong>f) merge</strong>(observable1, observable2,â€¦) â€” subscribes to every argument observable and re-emits values from all of them.</p><p><strong>g) switchMap</strong> â€” if previous Observable is not completed â€” cancel it and subscribe to new one.</p><p><strong>I) concat</strong>(observable1, observable2,â€¦) â€” start next Observable sequence only after previous one is done (emits values one by one after each specific Observable completion)</p><p>And many more (<a href="https://rxjs-dev.firebaseapp.com/api/operators/switchMap" target="_blank" rel="noopener noreferrer">switchMap</a>, mergeMap, <a href="https://rxjs-dev.firebaseapp.com/api/index/function/partition" target="_blank" rel="noopener noreferrer">partition</a>, <a href="https://rxjs-dev.firebaseapp.com/api/index/function/iif" target="_blank" rel="noopener noreferrer">iif</a>, <a href="https://rxjs-dev.firebaseapp.com/api/operators/groupBy" target="_blank" rel="noopener noreferrer">groupBy</a>, <a href="https://rxjs-dev.firebaseapp.com/api/operators/window" target="_blank" rel="noopener noreferrer">window</a>, etc)</p><p>We will review some of these combinations and their use-cases in a later chapter. And dig deeper in advanced RxJS course.</p><blockquote><p>Now lets review the main differences between Promises and Observables you should be aware of (or they will bite you some time later)</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="promises-vs-observables"></a>Promises <strong>vs</strong> Observables<a class="hash-link" href="#promises-vs-observables" title="Direct link to heading">#</a></h3><p>At first glance â€” Observables are just advanced Promises: Promises emits one value and complete (resolve), Observables emit 0, one or many values and complete as well (emit and complete are different actions). For HTTP service in AngularJS (where it used Promises) and Angular (where it uses Observables) provides only one value â€” so seems both frameworks work very similar in this case.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Observables in Angular 2+</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> source$ </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">this</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">http</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">get</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://example.com&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">source$</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">subscribe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(250, 208, 0)">next</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> data </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">handleData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Success handler</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(250, 208, 0)">error</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> error </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">handleError</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Error handler</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(250, 208, 0)">complete</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">completeHandler</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Complete handler</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>but if you application is doing something more then &#x27;Hello world&#x27; â€” please pay attention to the differences.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1-eager-vs-lazy"></a>#1 Eager vs Lazy<a class="hash-link" href="#1-eager-vs-lazy" title="Direct link to heading">#</a></h3><p>Take a look at the example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Promise-wrapped HTTP request</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">saveChanges</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token keyword" style="color:rgb(255, 157, 0)">return</span><span class="token plain"> $http</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">post</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://example.com&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Observable-wrapped HTTP request</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">saveChanges</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token keyword" style="color:rgb(255, 157, 0)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">this</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">http</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">post</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://example.com&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Does not send request!</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When I call the <code>saveChanges</code> method â€” the first example with <code>Promise</code>-wrapped request will work as expected. But in seconds <code>Observable</code>-wrapped example nothing will happen because <code>Observables</code> are lazily-evaluated while <code>Promises</code> are eagerly-evaluated.</p><p>This means that Promises doesn&#x27;t care whether they have any consumers that wait for their result or not, they will emit the value regardless. But <code>Observables</code> (to be precise â€” <em>cold</em> <code>Observables</code>) will emit only if we subscribe to them. In the case above you should subscribe to the <code>Observable</code> returned by <strong>saveChanges</strong> function.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">saveChanges</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">subscribe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To keep an eye on it â€” use <em>rxjs-no-ignored-observable</em> rule from <a href="https://github.com/cartant/rxjs-tslint-rules/blob/master/source/rules/rxjsNoIgnoredObservableRule.ts" target="_blank" rel="noopener noreferrer">rxjs-tslint-rules</a> by <a href="https://medium.com/u/d05557088657?source=post_page-----1161afacef7e----------------------" target="_blank" rel="noopener noreferrer">Nicholas Jamieson</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2-promises-cannot-be-canceled-while-observables-can-be-unsubscribed"></a>#2 Promises cannot be canceled while Observables can be unsubscribed<a class="hash-link" href="#2-promises-cannot-be-canceled-while-observables-can-be-unsubscribed" title="Direct link to heading">#</a></h3><p>Again, start with an example when we do search on a backend on input text change</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token plain">&lt;input ngKeyup=&quot;onKeyUp($event)&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Promise-wrapped HTTP request</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">saveChanges</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> text </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  $http</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">get</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://example.com?search=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">+</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">then</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">searchResult </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">showSearchResult</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">searchResult</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>There is a drawback here â€” you cannot reject results of the previous request if the user continues typing (<code>debounce</code> make this problem a bit less but doesn&#x27;t eliminate it). And yet another issue â€” race conditions are possible (when a later request result will come back faster then an earlier one â€” so we get an incorrect response displayed).</p><p><code>Observables</code> can avoid this concern quite elegantly with <a href="https://rxjs-dev.firebaseapp.com/api/operators/switchMap" target="_blank" rel="noopener noreferrer"><em> <strong>switchMap</strong> </em></a> operator</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token tag punctuation" style="color:rgb(255, 255, 255)">&lt;</span><span class="token tag" style="color:rgb(255, 157, 0)">input</span><span class="token tag" style="color:rgb(255, 157, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 180, 84)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(255, 255, 255)">=</span><span class="token tag attr-value punctuation" style="color:rgb(255, 255, 255)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 157, 0)">search</span><span class="token tag attr-value punctuation" style="color:rgb(255, 255, 255)">&quot;</span><span class="token tag punctuation" style="color:rgb(255, 255, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Observable-wrapped HTTP requet</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> inputElement </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(255, 238, 128)">document</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">getElementById</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;search&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> search$ </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">fromEvent</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">inputElement</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;keyup&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">ngOnInit</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  search$</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">pipe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// each time a new text value is emitted</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token function" style="color:rgb(250, 208, 0)">switchMap</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">event </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// switchMap cancels previous request and sends a new one</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">      </span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> text </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">      </span><span class="token keyword" style="color:rgb(255, 157, 0)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">this</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">http</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">get</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://example.com?search=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">+</span><span class="token plain"> text</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">subscribe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">newData </span><span class="token arrow operator" style="color:rgb(255, 157, 0)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">this</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">applyNewData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">newData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Use new data</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We will talk about <code>switchMap</code> and other higher-order-observable operators in the advanced RxJS course.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="3-easy-to-prevent-race-conditions-with-observables-and-hard---with-promises"></a>#3 Easy to prevent race conditions with Observables and hard - with Promises.<a class="hash-link" href="#3-easy-to-prevent-race-conditions-with-observables-and-hard---with-promises" title="Direct link to heading">#</a></h3><p>Say we periodically make a network request for updated data. But in some situations later request results will come back faster than the earlier ones â€” so we get incorrect (earlier requested) responses displayed as latest.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">getData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token keyword" style="color:rgb(255, 157, 0)">this</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token property-access">http$</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">get</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;...&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">then</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">doSomeRenderingFunc</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">setTimeout</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token number" style="color:rgb(255, 98, 140)">2000</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> getData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">setTimeout</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token number" style="color:rgb(255, 98, 140)">2500</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> getData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token spread operator" style="color:rgb(255, 157, 0)">...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We expect here that first response will be rendered first and then second one. But in reality, because of network latency, it may be not like that. The second request response can come earlier than the first(old) response data. So the user gets non-appropriate data displayed. This situation is called race-conditions.</p><p>To prevent this with Observable-wrapped requests we can use <a href="https://rxjs-dev.firebaseapp.com/api/operators/concatMap" target="_blank" rel="noopener noreferrer"><strong>concatMap</strong></a> operator (reviewed in advanced course).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#9EFEFF;background-color:#2D2A55"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">interval</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token number" style="color:rgb(255, 98, 140)">500</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">pipe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">concatMap</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> ajax</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">get</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;...&#x27;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token method function property-access" style="color:rgb(250, 208, 0)">subscribe</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">doSomeRenderingFunc</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In that case next request will be done only after the previous one is handled.</p><blockquote><p>I hope now you&#x27;ve got some vision of what Observables can do. Now lets review where they are used in Angular.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="angular-and-rxjs-observables"></a>Angular and RxJS Observables<a class="hash-link" href="#angular-and-rxjs-observables" title="Direct link to heading">#</a></h2><p>Angular and RxJS are like a bee and honey. There a lots of places where Angular entities API provides an <code>Observable</code>.</p><p>For example:</p><ul><li><strong>Http requests</strong> in Angular are wrapped in <code>Observables</code>, which allows us easily implement repeat/retry logic and make parallel or subsequent requests.</li><li>Reactive Forms: <strong>FormControls</strong> has a . <strong>valueChanges</strong> Observable property. Now each time the whole form or some specific field has changed - you will be notified.</li><li>@ <strong>ViewChildren</strong> decorator property has a . <strong>changes</strong> Observable API. Now each time the list is re-rendered by Angular - you will know that.</li><li><strong>Interceptors</strong> () - allow to implement additional logic for HTTP requests (like refresh tokens)</li><li><strong>Guards</strong>: can return an <code>Observable</code> of a boolean value to check asynchronously if a user can visit a Route</li><li><strong>Route Resolvers</strong>: do not render a page until the data necessary for it is in place</li></ul><p>And many more.</p><p>You will dig deeper in a later article.</p><p>Hope after reading this article you want to learn more - so lets move on!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/this-is-learning/rxjs-fundamentals-course/edit/main/docs/part-1.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rxjs-fundamentals-course/docs/part-2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Part 2. Reactive programming and RxJS Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-rxjs" class="table-of-contents__link">What is RxJS</a></li><li><a href="#what-are-observables" class="table-of-contents__link">What are Observables?</a></li><li><a href="#promises-and-observables" class="table-of-contents__link">Promises <strong>and</strong> Observables</a><ul><li><a href="#promises-vs-observables" class="table-of-contents__link">Promises <strong>vs</strong> Observables</a></li><li><a href="#1-eager-vs-lazy" class="table-of-contents__link">#1 Eager vs Lazy</a></li><li><a href="#2-promises-cannot-be-canceled-while-observables-can-be-unsubscribed" class="table-of-contents__link">#2 Promises cannot be canceled while Observables can be unsubscribed</a></li><li><a href="#3-easy-to-prevent-race-conditions-with-observables-and-hard---with-promises" class="table-of-contents__link">#3 Easy to prevent race conditions with Observables and hard - with Promises.</a></li></ul></li><li><a href="#angular-and-rxjs-observables" class="table-of-contents__link">Angular and RxJS Observables</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Open Learning</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rxjs-fundamentals-course/docs/part-1">RxJS Fundamentals</a></li><li class="footer__item"><a href="https://dev.to/this-is-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Learning on DEV Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://dev.to/this-is-angular" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Angular on DEV Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/ygKzbrBtVn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Learning Community on Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/this-is-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Learning on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/this-is-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Angular on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/this-is-learning/rxjs-fundamentals-course" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Star on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Thisis_Learning" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Learning on Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Thisis_Angular" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>This is Angular on Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 This is Learning. Licensed under CC BY-SA 4.0.</div></div></div></footer></div>
<script src="/rxjs-fundamentals-course/assets/js/runtime~main.0d80912e.js"></script>
<script src="/rxjs-fundamentals-course/assets/js/main.8ae3d8c4.js"></script>
</body>
</html>